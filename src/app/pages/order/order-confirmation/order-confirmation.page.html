<ion-content>
  <ion-toolbar class="ion-padding shadow-box">
    <ion-icon
      slot="start"
      (click)="closeModal()"
      color="lightgray"
      style="font-size: 28pt; opacity: 0.8;"
      name="close-circle"
    ></ion-icon>
    <div class="ion-padding-start ion-padding-end">
      <ion-text style="font-weight: 600;" color="darkgray"
        >{{ transformDateTime(orderDetail.dateTime) }}</ion-text
      >
      <br />
      <ion-text style="font-size: 8pt;" color="darkgray"
        >order ID: {{ orderDetail._id }}</ion-text
      >
    </div>
    <ion-text
      *ngIf="orderDetail.queue != -1"
      style="font-size: 32pt; font-weight: 500;"
      color="gprimary"
      slot="end"
      >{{ orderDetail.queue }}</ion-text
    >
  </ion-toolbar>

  <ion-toolbar class="ion-margin-bottom ion-padding-start">
    <ion-avatar
      class="ion-margin-end"
      style="width: 20%; height: auto;"
      slot="start"
    >
      <ion-img
        [src]="'https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y'"
      ></ion-img>
    </ion-avatar>
    <ion-text style="font-weight: 600; font-size: 14pt;" color="darkgray"
      >{{ orderDetail.customerName }}</ion-text
    >
  </ion-toolbar>

  <ion-list>
    <ion-list-header>
      <ion-text color="darkgray">Order summary</ion-text>
    </ion-list-header>

    <ion-item
      *ngFor="let item of orderDetail.items"
      style="margin-bottom: 8px; padding-left: 4px; padding-right: 4px;"
    >
      <ion-grid>
        <ion-row>
          <ion-col size="4">
            <ion-img
              style="height: 80px; object-fit: cover;"
              [src]="item.imageUrl"
            ></ion-img>
          </ion-col>
          <ion-col size="4">
            <ion-text color="darkgray" style="font-weight: 600;"
              >{{ item.foodName }}</ion-text
            >
            <br />

            <ion-text
              *ngFor="let optionString of item.options"
              color="lightgray"
              >{{ optionString }}<br
            /></ion-text>
            <br />
          </ion-col>
          <ion-col size="2">
            <ion-text color="darkgray">{{ item.numberOfItem }}x</ion-text>
          </ion-col>
          <ion-col size="2">
            <ion-text style="float: right; font-weight: bold;" color="darkgray"
              >{{ item.price * item.numberOfItem }}</ion-text
            >
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-item>
  </ion-list>

  <div class="ion-padding-start ion-margin-top ion-margin-bottom">
    <ion-text style="font-weight: bold;" color="darkgray"
      >Payment method</ion-text
    >
    <br />
    <ion-text color="gray" class="ion-padding-start"
      >{{ orderDetail.paymentMethod }}</ion-text
    >
  </div>
</ion-content>

<ion-footer
  style="background-color: white; width: 100%;"
  class="ion-padding shadow-border"
>
  <ion-toolbar style="--border-width: 0;" class="ion-no-padding ion-no-margin">
    <ion-text
      slot="start"
      style="font-weight: bold;"
      color="darkgray"
      class="ion-padding-start"
      >Total</ion-text
    >
    <ion-text
      slot="end"
      style="font-weight: 500; font-size: 20pt; float: right;"
      color="gprimary"
      >{{ totalPrice }}</ion-text
    >
  </ion-toolbar>

  <!-- Separate line -->
  <div
    style="background-color: #9d9d9d; height: 1px; width: 90%; margin: 12px auto 12px auto;"
  ></div>

  <div class="ion-text-center">
    <ion-text style="font-weight: 500;" color="darkgray"
      >Accept this order?</ion-text
    >
  </div>
  <ion-toolbar class="ion-padding-bottom ion-margin-top">
    <ion-buttons>
      <div
        class="ion-text-center"
        style="width: 35%; height: 36px; margin-left: auto; margin-right: 24px;"
      >
        <ion-button
          (click)="rejectOrder()"
          fill="solid"
          shape="block"
          color="lightgray"
          >No</ion-button
        >
        <ion-label style="position: sticky; bottom: -10px;">
          <ion-text color="danger">reject this order</ion-text>
        </ion-label>
      </div>
      <div
        class="ion-text-center"
        style="width: 35%; height: 36px; margin-right: auto; margin-left: 24px;"
      >
        <ion-button
          (click)="acceptOrder()"
          fill="solid"
          shape="block"
          color="gprimary"
          >Yes</ion-button
        >
      </div>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>
